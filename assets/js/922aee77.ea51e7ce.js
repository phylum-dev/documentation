"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([["6722"],{5648:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>i,default:()=>d,contentTitle:()=>s,assets:()=>c,toc:()=>l,metadata:()=>n});var n=JSON.parse('{"id":"package_firewall/cargo","title":"Phylum Cargo Registry","description":"The Phylum Cargo registry is based on Cargo\'s sparse [Registry Index API].","source":"@site/../docs/package_firewall/cargo.md","sourceDirName":"package_firewall","slug":"/package_firewall/cargo","permalink":"/package_firewall/cargo","draft":false,"unlisted":false,"editUrl":"https://github.com/phylum-dev/documentation/edit/main/docs/package_firewall/cargo.md","tags":[],"version":"current","lastUpdatedBy":"Christian Duerr","lastUpdatedAt":1742864817000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Nexus Repository","permalink":"/package_firewall/nexus"},"next":{"title":"Phylum Golang Proxy","permalink":"/package_firewall/golang"}}'),o=r(5893),a=r(65);let i={},s="Phylum Cargo Registry",c={},l=[{value:"Configuration",id:"configuration",level:2},{value:"<code>cargo</code>",id:"cargo",level:3}];function u(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"phylum-cargo-registry",children:"Phylum Cargo Registry"})}),"\n",(0,o.jsxs)(t.p,{children:["The Phylum Cargo registry is based on Cargo's sparse ",(0,o.jsx)(t.a,{href:"https://doc.rust-lang.org/cargo/reference/registry-index.html",children:"Registry Index API"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(t.p,{children:["All configuration options will require a Phylum API key, since Phylum requires\nauthentication. You can find out how to generate one in our\n",(0,o.jsx)(t.a,{href:"/knowledge_base/api-keys#generate-an-api-key",children:"API Keys documentation"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["In the following examples, all API keys will be represented as\n",(0,o.jsx)(t.code,{children:"<PHYLUM_API_KEY>"}),", so make sure to replace them with your generated key."]}),"\n",(0,o.jsxs)(t.p,{children:["Additionally, if the default policy is not sufficient, a group can be passed to\nevaluate all packages against the group's policy. To do this, just replace\n",(0,o.jsx)(t.code,{children:"<PHYLUM_ORG>"})," and ",(0,o.jsx)(t.code,{children:"<PHYLUM_GROUP>"})," with the desired org and group name. The\nsupplied API key ",(0,o.jsx)(t.strong,{children:"must"})," have access to this group."]}),"\n",(0,o.jsxs)(t.p,{children:["If Phylum's default ",(0,o.jsx)(t.a,{href:"/knowledge_base/policy",children:"policy"})," is sufficient, you can omit the username from the\nauthentication details."]}),"\n",(0,o.jsx)(t.h3,{id:"cargo",children:(0,o.jsx)(t.code,{children:"cargo"})}),"\n",(0,o.jsxs)(t.p,{children:["To use the Phylum Cargo registry, it first needs to be added to a\n",(0,o.jsxs)(t.a,{href:"https://doc.rust-lang.org/cargo/reference/config.html",children:[(0,o.jsx)(t.code,{children:".cargo/config.toml"})," file"]}),". On UNIX you can use ",(0,o.jsx)(t.code,{children:"~/.cargo/config.toml"})," to make\nthe registry available to all projects."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[registries]\nphylum = { index = "sparse+https://cargo.phylum.io/" }\n'})}),"\n",(0,o.jsxs)(t.p,{children:["This makes the Phylum registry available to all Cargo projects, however by\ndefault Cargo will still use the official registry. To ensure all requests go\nthrough Phylum, you'll have to override the ",(0,o.jsx)(t.a,{href:"https://crates.io",children:"crates.io"})," registry in the\n",(0,o.jsxs)(t.a,{href:"https://doc.rust-lang.org/cargo/reference/config.html",children:[(0,o.jsx)(t.code,{children:".cargo/config.toml"})," file"]}),". This can be a project's Cargo config if you do not\nwish to globally run every install through Phylum."]}),"\n",(0,o.jsxs)(t.p,{children:["The easiest way to enable Phylum is by replacing the ",(0,o.jsx)(t.a,{href:"https://crates.io",children:"crates.io"})," source with\nPhylum's registry. This has the advantage of creating ",(0,o.jsx)(t.code,{children:"Cargo.toml"})," and\n",(0,o.jsx)(t.code,{children:"Cargo.lock"})," files that are identical to the ones created for the official\nregistry."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[source.crates-io]\nreplace-with = "phylum"\n'})}),"\n",(0,o.jsx)(t.p,{children:"Since replacing the Cargo source prevents you from using the official registry,\nthis is unsuitable if certain packages should still be installable without going\nthrough Phylum. In this case you can just set Phylum to be the default registry\ninstead:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[registry]\ndefault = "phylum"\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Since Phylum's registry requires authentication, you'll also need to configure a\ncredential provider in your ",(0,o.jsxs)(t.a,{href:"https://doc.rust-lang.org/cargo/reference/config.html",children:[(0,o.jsx)(t.code,{children:".cargo/config.toml"})," file"]}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[registry]\nglobal-credential-providers = ["cargo:token"]\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Once the file-based ",(0,o.jsx)(t.code,{children:"cargo:token"})," credential provider is configured, you can add\nyour authentication details to the ",(0,o.jsxs)(t.a,{href:"https://doc.rust-lang.org/nightly/cargo/reference/config.html#credentials",children:[(0,o.jsx)(t.code,{children:".cargo/credentials.toml"})," file"]}),"."]}),"\n",(0,o.jsx)(t.p,{children:"The Phylum org, group, and API key first need to be converted to Base64:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-text",children:'printf "<PHYLUM_ORG>/<PHYLUM_GROUP>:<PHYLUM_API_KEY>" | base64\n'})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["\u26A0\uFE0F ",(0,o.jsx)(t.strong,{children:"WARNING"})," \u26A0\uFE0F"]}),"\n",(0,o.jsx)(t.p,{children:"Do not accidentally save your token into your shell history."}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Once converted to Base64, you can add it as a basic authentication token to your\ncredentials:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[registries.phylum]\ntoken = "Basic <BASE64_OUTPUT>"\n'})}),"\n",(0,o.jsxs)(t.p,{children:["A blocked package will show up in ",(0,o.jsx)(t.code,{children:"cargo"})," output as missing:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-text",children:"    Updating `phylum` index\nerror: no matching package named `libc` found\nlocation searched: registry `phylum`\nrequired by package `testing v0.1.0 (/tmp/testing)`\n"})}),"\n",(0,o.jsxs)(t.p,{children:["If ",(0,o.jsx)(t.strong,{children:"all"})," versions of a package are blocked, it will be explicitly pointed out\nas having failed analysis:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-text",children:'error: failed to query replaced source registry `crates-io`\n\nCaused by:\n  download of li/bc/libc failed\n\nCaused by:\n  failed to get successful HTTP response from `https://cargo.phylum.io/li/bc/libc`, got 424\n  body:\n  "libc" failed Phylum analysis\n'})}),"\n",(0,o.jsx)(t.p,{children:"Alternatively, if a specific version constraint matches the blocked version:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-text",children:'    Updating `phylum` index\nerror: failed to select a version for the requirement `libc = "=0.2.155"`\ncandidate versions found which didn\'t match: 0.2.158, 0.2.157, 0.2.156, ...\nlocation searched: `phylum` index\nrequired by package `testing v0.1.0 (/tmp/testing)`\n'})}),"\n",(0,o.jsx)(t.p,{children:"If a version range is accepted by the manifest, the package manager will\nautomatically attempt to use a version that passes Phylum's policy."})]})}function d(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},5251:function(e,t,r){var n=r(7294),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,a={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!c.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:l,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},2408:function(e,t){var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function m(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function x(){}function j(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=m.prototype;var b=j.prototype=new x;b.constructor=j,y(b,m.prototype),b.isPureReactComponent=!0;var v=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,o)&&!P.hasOwnProperty(o)&&(a[o]=t[o]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===a[o]&&(a[o]=c[o]);return{$$typeof:r,type:e,key:i,ref:s,props:a,_owner:k.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function R(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function E(e,t,o){if(null==e)return e;var a=[],i=0;return!function e(t,o,a,i,s){var c,l,u,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var f=!1;if(null===t)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case r:case n:f=!0}}if(f)return s=s(f=t),t=""===i?"."+R(f,0):i,v(s)?(a="",null!=t&&(a=t.replace(S,"$&/")+"/"),e(s,o,a,"",function(e){return e})):null!=s&&(C(s)&&(c=s,l=a+(!s.key||f&&f.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+t,s={$$typeof:r,type:c.type,key:l,ref:c.ref,props:c.props,_owner:c._owner}),o.push(s)),1;if(f=0,i=""===i?".":i+":",v(t))for(var p=0;p<t.length;p++){var y=i+R(d=t[p],p);f+=e(d,o,a,y,s)}else if("function"==typeof(y=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(t=y.call(t),p=0;!(d=t.next()).done;)y=i+R(d=d.value,p++),f+=e(d,o,a,y,s);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(o=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return f}(e,a,"","",function(e){return t.call(o,e,i++)}),a}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},T={transition:null};function $(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,r){E(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=i,t.PureComponent=j,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:T,ReactCurrentOwner:k},t.act=$,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=y({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!P.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:r,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=$,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},7294:function(e,t,r){e.exports=r(2408)},5893:function(e,t,r){e.exports=r(5251)},65:function(e,t,r){r.d(t,{Z:()=>s,a:()=>i});var n=r(7294);let o={},a=n.createContext(o);function i(e){let t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);