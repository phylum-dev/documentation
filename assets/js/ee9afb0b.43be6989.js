"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([["7405"],{4316:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>o,default:()=>d,contentTitle:()=>a,assets:()=>l,toc:()=>c,metadata:()=>r});var r=JSON.parse('{"id":"cli/extensions/extension_manifest","title":"Extension Manifest Format","description":"Overview","source":"@site/../docs/cli/extensions/extension_manifest.md","sourceDirName":"cli/extensions","slug":"/cli/extensions/extension_manifest","permalink":"/cli/extensions/extension_manifest","draft":false,"unlisted":false,"editUrl":"https://github.com/phylum-dev/cli/edit/main/docs/extensions/extension_manifest.md","tags":[],"version":"current","lastUpdatedBy":"Charles Coggins","lastUpdatedAt":1742485300000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Extension Quickstart","permalink":"/cli/extensions/extension_quickstart"},"next":{"title":"Extension API","permalink":"/cli/extensions/extension_api"}}'),i=t(5893),s=t(65);let o={},a="Extension Manifest Format",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Name",id:"name",level:2},{value:"Description",id:"description",level:2},{value:"Entry Point",id:"entry-point",level:2},{value:"Permissions",id:"permissions",level:2},{value:"Read",id:"read",level:3},{value:"Write",id:"write",level:3},{value:"Env",id:"env",level:3},{value:"Run",id:"run",level:3},{value:"Unsandboxed Run",id:"unsandboxed-run",level:3},{value:"Net",id:"net",level:3}];function u(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"extension-manifest-format",children:"Extension Manifest Format"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Extension metadata is defined in the ",(0,i.jsx)(n.code,{children:"PhylumExt.toml"})," file, using the ",(0,i.jsx)(n.a,{href:"https://toml.io",children:"TOML"}),"\nformat. Manifest files consist of the following sections:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#name",children:(0,i.jsx)(n.code,{children:"name"})})," \u2014 Extension name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#description",children:(0,i.jsx)(n.code,{children:"description"})})," - Description of the extension"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#entry-point",children:(0,i.jsx)(n.code,{children:"entry_point"})})," \u2014 Execution entry point"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#permissions",children:(0,i.jsx)(n.code,{children:"[permissions]"})})," \u2014 Permissions required for execution\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#read",children:(0,i.jsx)(n.code,{children:"read"})})," \u2014 Required read path permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#write",children:(0,i.jsx)(n.code,{children:"write"})})," \u2014 Required write path permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#env",children:(0,i.jsx)(n.code,{children:"env"})})," \u2014 Required environment variable permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#run",children:(0,i.jsx)(n.code,{children:"run"})})," \u2014 Required process execution permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#unsandboxed-run",children:(0,i.jsx)(n.code,{children:"unsandboxed_run"})})," - Required executables to run outside\nthe sandbox"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#net",children:(0,i.jsx)(n.code,{children:"net"})})," \u2014 Required network domain permissions"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"name",children:"Name"}),"\n",(0,i.jsx)(n.p,{children:"The extension name is used as the subcommand for executing the extension and\nacts as an identifier when referring to it."}),"\n",(0,i.jsxs)(n.p,{children:["The name is required and must use only lowercase alphanumeric characters,\nhyphens (",(0,i.jsx)(n.code,{children:"-"}),"), or underscores (",(0,i.jsx)(n.code,{children:"_"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'name = "hello-world_1"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"The description is an optional short blurb about the extension. This should be\nplain text (not Markdown)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'description = "Example extension that greets the world"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"entry-point",children:"Entry Point"}),"\n",(0,i.jsxs)(n.p,{children:["The entry point points to the file which should be loaded as the initial\nJavaScript module. Generally this will be the ",(0,i.jsx)(n.code,{children:"main.ts"})," file in the extension\nroot directory."]}),"\n",(0,i.jsx)(n.p,{children:"Phylum CLI extensions support both JavaScript and TypeScript out of the box,\ntranspiling TypeScript automatically before execution."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'entry_point = "main.ts"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"permissions",children:"Permissions"}),"\n",(0,i.jsx)(n.p,{children:"Since extensions are executed inside Deno's JavaScript sandbox, no external\neffects can be performed without requesting the necessary permissions."}),"\n",(0,i.jsx)(n.p,{children:"Users will be prompted to agree to these permissions during install, they are\nlater validated during execution relative to the active working directory when\nrunning it."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"[permissions]"})," is an optional table of key-value pairs where each key is a type\nof permission."]}),"\n",(0,i.jsx)(n.h3,{id:"read",children:"Read"}),"\n",(0,i.jsx)(n.p,{children:"Read permissions list file paths which can be read from by the extension."}),"\n",(0,i.jsx)(n.p,{children:"Granting permissions to a directory will also allow the extension to access any\nchild directories and files inside them."}),"\n",(0,i.jsx)(n.p,{children:"This is an optional key-value pair where the value is either a boolean, or an\narray containing the allowed directories."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nread = [\n    "./path/to/file.txt",\n    "./path/to/directory",\n    "./config_file.yaml",\n]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nread = true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"write",children:"Write"}),"\n",(0,i.jsx)(n.p,{children:"Write permissions list file paths which can be written to by the extension."}),"\n",(0,i.jsx)(n.p,{children:"Granting permissions to a directory will also allow the extension to access any\nchild directories and files inside them."}),"\n",(0,i.jsx)(n.p,{children:"This is an optional key-value pair where the value is either a boolean, or an\narray containing the allowed directories."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nwrite = ["./output_file.txt"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nwrite = true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"env",children:"Env"}),"\n",(0,i.jsx)(n.p,{children:"Env permissions list environment variables which can be read by the extension."}),"\n",(0,i.jsx)(n.p,{children:"This is an optional key-value pair where the value is either a boolean, or an\narray containing the allowed environment variables."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nenv = ["PHYLUM_API_KEY"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nenv = true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run",children:"Run"}),"\n",(0,i.jsx)(n.p,{children:"Run permissions list executable paths which can be executed by the extension."}),"\n",(0,i.jsxs)(n.p,{children:["This permission is required for executing paths with ",(0,i.jsx)(n.code,{children:"Phylum.runSandboxed"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The executable paths take ",(0,i.jsx)(n.code,{children:"$PATH"})," into account, so it is recommended to avoid\nusing absolute paths to improve portability."]}),"\n",(0,i.jsxs)(n.p,{children:["The paths also need to match ",(0,i.jsx)(n.strong,{children:"exactly"})," with the process executed by the\nextension. ",(0,i.jsx)(n.code,{children:"/usr/bin/curl"})," cannot be executed when ",(0,i.jsx)(n.code,{children:"curl"})," was requested as\npermission and vice versa."]}),"\n",(0,i.jsx)(n.p,{children:"This is an optional key-value pair where the value is either a boolean, or an\narray containing the allowed executables."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"IMPORTANT NOTE:"})," Granting run permission implicitly grants read permissions\non the same paths because both permissions are necessary to run an executable.\nThis means that using ",(0,i.jsx)(n.code,{children:"run = true"})," implies ",(0,i.jsx)(n.code,{children:"read = true"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nrun = ["npm", "yarn"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nrun = true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unsandboxed-run",children:"Unsandboxed Run"}),"\n",(0,i.jsxs)(n.p,{children:["Unsandboxed run permissions list executable paths which can be executed without\n",(0,i.jsx)(n.strong,{children:"any"})," sandboxing restrictions. This means they can execute arbitrary code even\nbeyond the requested manifest permissions."]}),"\n",(0,i.jsxs)(n.p,{children:["This permission is required for executing paths with ",(0,i.jsx)(n.code,{children:"Deno.Command"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"#run",children:"run"})," for more details."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nunsandboxed_run = ["npm", "yarn"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nunsandboxed_run = true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"net",children:"Net"}),"\n",(0,i.jsx)(n.p,{children:"Net permissions list domains which can be accessed by the extension."}),"\n",(0,i.jsx)(n.p,{children:"Network permissions only describe the domains and subdomains an extension has\naccess to, regardless of its path segments or protocol scheme. Access to a\ndomain does not automatically grant access to all of its subdomains."}),"\n",(0,i.jsx)(n.p,{children:"If the requested domain requests a redirect, you'll also require permissions to\naccess the redirect target. It's easiest to just specify the redirect target\ndirectly when making requests, otherwise you'll have to request permissions for\nboth domains."}),"\n",(0,i.jsx)(n.p,{children:"This is an optional key-value pair where the value is either a boolean, or an\narray containing the allowed domains."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[permissions]\n# ...\nnet = ["www.veracode.com", "veracode.com"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:"[permissions]\n# ...\nnet = true\n"})})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},5251:function(e,n,t){var r=t(7294),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,t){var r,s={},c=null,u=null;for(r in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)o.call(n,r)&&!l.hasOwnProperty(r)&&(s[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===s[r]&&(s[r]=n[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}n.Fragment=s,n.jsx=c,n.jsxs=c},2408:function(e,n){var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,m={};function y(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||f}function j(){}function v(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},j.prototype=y.prototype;var b=v.prototype=new j;b.constructor=v,x(b,y.prototype),b.isPureReactComponent=!0;var g=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,n,r){var i,s={},o=null,a=null;if(null!=n)for(i in void 0!==n.ref&&(a=n.ref),void 0!==n.key&&(o=""+n.key),n)w.call(n,i)&&!E.hasOwnProperty(i)&&(s[i]=n[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:t,type:e,key:o,ref:a,props:s,_owner:_.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var R=/\/+/g;function T(e,n){var t,r;return"object"==typeof e&&null!==e&&null!=e.key?(t=""+e.key,r={"=":"=0",":":"=2"},"$"+t.replace(/[=:]/g,function(e){return r[e]})):n.toString(36)}function N(e,n,i){if(null==e)return e;var s=[],o=0;return!function e(n,i,s,o,a){var l,c,u,d=typeof n;("undefined"===d||"boolean"===d)&&(n=null);var h=!1;if(null===n)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(n.$$typeof){case t:case r:h=!0}}if(h)return a=a(h=n),n=""===o?"."+T(h,0):o,g(a)?(s="",null!=n&&(s=n.replace(R,"$&/")+"/"),e(a,i,s,"",function(e){return e})):null!=a&&(k(a)&&(l=a,c=s+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+n,a={$$typeof:t,type:l.type,key:c,ref:l.ref,props:l.props,_owner:l._owner}),i.push(a)),1;if(h=0,o=""===o?".":o+":",g(n))for(var f=0;f<n.length;f++){var x=o+T(d=n[f],f);h+=e(d,i,s,x,a)}else if("function"==typeof(x=null===(u=n)||"object"!=typeof u?null:"function"==typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(n=x.call(n),f=0;!(d=n.next()).done;)x=o+T(d=d.value,f++),h+=e(d,i,s,x,a);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(n))?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return h}(e,s,"","",function(e){return n.call(i,e,o++)}),s}function P(e){if(-1===e._status){var n=e._result;(n=n()).then(function(n){(0===e._status||-1===e._status)&&(e._status=1,e._result=n)},function(n){(0===e._status||-1===e._status)&&(e._status=2,e._result=n)}),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},O={transition:null};function $(){throw Error("act(...) is not supported in production builds of React.")}n.Children={map:N,forEach:function(e,n,t){N(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return N(e,function(){n++}),n},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=i,n.Profiler=o,n.PureComponent=v,n.StrictMode=s,n.Suspense=u,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:O,ReactCurrentOwner:_},n.act=$,n.cloneElement=function(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=x({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,a=_.current),void 0!==n.key&&(s=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in n)w.call(n,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:t,type:e.type,key:s,ref:o,props:i,_owner:a}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},n.createElement=S,n.createFactory=function(e){var n=S.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:c,render:e}},n.isValidElement=k,n.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=O.transition;O.transition={};try{e()}finally{O.transition=n}},n.unstable_act=$,n.useCallback=function(e,n){return C.current.useCallback(e,n)},n.useContext=function(e){return C.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return C.current.useDeferredValue(e)},n.useEffect=function(e,n){return C.current.useEffect(e,n)},n.useId=function(){return C.current.useId()},n.useImperativeHandle=function(e,n,t){return C.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return C.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return C.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return C.current.useMemo(e,n)},n.useReducer=function(e,n,t){return C.current.useReducer(e,n,t)},n.useRef=function(e){return C.current.useRef(e)},n.useState=function(e){return C.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return C.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return C.current.useTransition()},n.version="18.3.1"},7294:function(e,n,t){e.exports=t(2408)},5893:function(e,n,t){e.exports=t(5251)},65:function(e,n,t){t.d(n,{Z:()=>a,a:()=>o});var r=t(7294);let i={},s=r.createContext(i);function o(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);